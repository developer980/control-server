<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    {% load static %}
    <link rel="stylesheet" href="/static/css/buttons.css" />
    <link rel="stylesheet" href="/static/css/forms.css" />
    <link rel="stylesheet" href="/static/css/inputs.css" />
    <link rel="stylesheet" href="/static/css/main.css" />
  </head>

  <body>
    <form method="post" class="form-primary">
      <h3 class="title-primary">ADMIN</h3>
      <div class="input-field">
        <label for="email"> Email</label><br />
        <input
          class="input-primary"
          id="email"
          name="email"
          type="text"
          placeholder="Email"
        /><br />
      </div>
      <div class="input-field">
        <label for="password">Password</label><br />
        <input
          class="input-primary"
          id="password"
          name="password"
          type="password"
          placeholder="Password"
        /><br />
      </div>
      <button type="submit" class="button-primary">Login</button>
    </form>
  </body>

  <script>
    document.querySelector(".form-primary").onsubmit = async (e) => {
      e.preventDefault();

      const email = document.querySelector("#email").value;
      const password = document.querySelector("#password").value;
      const route = `http://127.0.0.1:8000/api/c-admin/auth/login/`;

      const response = await fetch(route, {
        method: "POST",
        body: JSON.stringify({ email, password }),
        headers: {
          "Content-Type": "application/json",
          "X-CSRFToken": "{{ csrf_token }}",
        },
      });

      const data = await response.json();
      console.log(data);
    };
  </script>
</html>
